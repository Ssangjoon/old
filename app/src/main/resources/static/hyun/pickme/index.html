<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reset-css@5.0.1/reset.min.css">
  <link rel="stylesheet" href="../../junho/main2.html">
  <link rel="stylesheet" href="../../node_modules/bootstrap/dist/css/bootstrap.min.css">

  <style>
    #body-content{ 
      width: 1130px auto;
      margin: 150px; 
    }
    #localSelect{
      display: inline-block;
      width: 150px;
    }
    #search{
      width: 200px;
      margin: 0.5px;
      float: right; /*오른쪽 정렬*/
    }
    table > thead {
      text-align: center;
    }
    table > tbody > tr > td {
      text-align: center;
    }
  </style>   
  </head>

<body>
  <div id="headers"></div>

  <div id="body-content">
    <div id="localSelect"> <!--지역선택란 나중에 다중 selectbox로 바꿔야함-->
      <select class="form-select form-select-sm" aria-label=".form-select-sm example">
        <option selected>지역선택</option>
        <option value="1">서울</option>
        <option value="2">경기</option>
        <option value="3">인천</option>
      </select>
    </div>

    <div id="search">
      <form class="d-flex"> <!--검색창-->
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-primary btn-sm" type="submit">Search</button>
      </form>
    </div>
  
  <div id="content" class="table-responsive-lg">
    <table id="x-board-table" class="table table-hover">
      <thead>
        <tr>
          <th width="50px">번호</th>
          <th width="500px">제목</th>
          <th width="100px">작성자</th>
          <th width="150px">등록일</th>
          <th width="100px">조회수</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <button id="x-create-btn" type="button" style="float: right" class="btn btn-primary">등록</button>
  
  <!--페이지 네이션-->
  <nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center">
      <li class="page-item disabled">
        <a class="page-link">Previous</a>
      </li>
      <li class="page-item"><a class="page-link" href="#">1</a></li>
      <li class="page-item"><a class="page-link" href="#">2</a></li>
      <li class="page-item"><a class="page-link" href="#">3</a></li>
      <li class="page-item">
        <a class="page-link" href="#">Next</a>
      </li>
    </ul>
  </nav>
</div>

  <script src="../../node_modules/jquery/dist/jquery.min.js"></script>
  <script src="../../node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="../../node_modules/handlebars/dist/handlebars.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function () {
        $('#headers').load('../../junho/main2.html'); //헤더 인클루드
        // $('#footers').load('../html'); //푸터부분 인클루드
    });
  </script>

  <!--핸들바-->
  <script id="tr-template" type="text/x-handlebars-template">
    {{#each this}}
    <tr>
      <td>{{no}}</td>
      <td><a href="view.html?no={{no}}">{{title}}</a></td>
      <td>{{member.[0].membName}}</td>
      <td>{{date}}</td>
      <td>{{viewCnt}}</td>
    </tr>
    {{/each}}
  </script>

<script>
  var tbody = document.querySelector("#x-board-table tbody");

  var trTemplate = document.querySelector("#tr-template");
  
  var htmlGenerator = Handlebars.compile(trTemplate.innerHTML);
  
  fetch("/recruit/list")
    .then(function(response) {
      return response.json();
    })
    .then(function(recruits) {
      console.log(recruits);
        tbody.innerHTML = htmlGenerator(recruits);
    });
 
    document.querySelector("#x-create-btn").onclick = function(){
      location.href="form.html";
    };
</script>
</body>
</html>